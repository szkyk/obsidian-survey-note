# Gemini 作業コンテキスト

このファイルは、AIアシスタントがこのプロジェクトのコンテキストとこれまでの作業履歴を理解するために使用されます。

## プロジェクト概要

- **名称:** Obsidian Survey Note Plugin
- **目的:** Obsidian上で、ノートを構造化された5つのセクションからなるグリッドレイアウトで表示・編集するためのプラグイン。
- **主要技術:** TypeScript, Obsidian API, CodeMirror

## 主要なファイル

- `main.ts`: プラグインのメインロジック。コマンド登録、設定管理、ビューの切り替えなど。
- `view.ts`: SurveyNoteビューのUIとロジック。CodeMirrorエディタの生成、Markdownの解析と保存、ファイル名の変更処理など。
- `styles.css`: SurveyNoteビューの全般的なスタイリング。Minimalテーマ風のMarkdownプレビュースタイルを含む。

## これまでの作業履歴 (直近のセッショ���)

1.  **フォントサイズ変更機能の実装:**
    - 設定画面にフォントサイズ変更オプションを追加。
    - 設定変更がリアルタイムでビューに反映されるように `main.ts` と `view.ts` を修正。
    - 当初、変更が反映されなかったため `styles.css` をデバッグし、CSS変数 (`--surveynote-font-size`) を使用するように修正。

2.  **UI/UXの改善 (Minimalテーマ風):**
    - ユーザーの要望により、MarkdownプレビューのスタイルをGitHub風からMinimalテーマ風に変更。
    - ヘッダー (h1, h2, h3) のフォントサイズが大きすぎたため、拡大率を調整。
    - 引用符、リンクなどのスタイルを調整。
    - 編集エリアの視認性向上のため、入力欄にパディングを追加 (`.cm-scroller`)。

3.  **タイトルのスタイル修正:**
    - ビュー内のタイトル入力欄のフォントサイズが、基本フォントサイズの1.6倍になるように `styles.css` を修正。
    - 当初、Obsidian本体のスタイルに上書きされていたため、CSSセレクタの詳細度を上げて (`.surveynote-view-root .surveynote-title-input`) 修正。

4.  **ドキュメントの更新:**
    - コードの現状（データ保存形式の変更、機能追加など）と `README.md` の間に大きな乖離があったため、内容を全面的に更新し、最新の状態に修正した。

5.  **レイアウトとUIの全体的な改善:**
    - **動的レイアウトの実装:** ユーザーのフィードバックに基づき、レイアウトの仕様を大幅に変更。
        - **上段（目的・概要）:** 高さをフォントサイズ設定に連動した4行分に固定し、内容がはみ出す場合はセクション内でスクロールするように修正。
        - **下段（内容など）:** ウィンドウの高さに応じて拡張し、空きスペースを埋めるように修正。コンテンツがセクションの高さを超える場合は、ページ全体がスクロールするようにした。
    - **フォーカス表示:** 編集中のセクションの枠線をハイライトするようにし、視認性を向上。
    - **コードブロックのスタイル:** 複数行にわたるコードブロックに背景色やパディングを追加し、見やすくした。

## ��在のプロジェクト状態

- **データ保存形式:** Markdownのレベル2ヘッダー (`## SectionName`) を使用して本文中に保存。フロントマターは使用しない。
- **エディタ:** 各セクションはCodeMirrorエディタで実装されており、リッチなMarkdownプレビューが可能。
- **スタイリング:** 全体的にObsidianの人気テーマ「Minimal」にインスパイアされたクリーンなデザインになっている。
- **レイアウト:** 上段が高さ固定（内部スクロールあり）、下段が可変（ページ全体でスクロール）という動的なグリッドレイアウト。
- **主要機能:** グリッドビュー、ファイル名変更、画像ドロップ、フォーカス表示、コードブロックスタイル、フォントサイズ/テーマ設定などが実装済み。
